(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{574:function(e,s,a){"use strict";a.r(s);var n=a(15),t=Object(n.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),a("p",[e._v("随着越来越多的公司使用Kubernetes作为它们运行应用的最佳平台，Kubernetes帮助企业标准化了无论是云端部署还是内部部署的应用交付方式；作为研发人员我们还是很有必要去了解其使用方式，了解其内部机制，接下来的一段时间准备通过阅读"),a("strong",[e._v("Kubernetes in Action")]),e._v("来更多的了解Kubernetes。")]),e._v(" "),a("h2",{attrs:{id:"docker安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker安装"}},[e._v("#")]),e._v(" Docker安装")]),e._v(" "),a("h3",{attrs:{id:"_1-删除旧版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-删除旧版本"}},[e._v("#")]),e._v(" 1.删除旧版本")]),e._v(" "),a("p",[e._v("因为最早之前安装使用过docker，后面一段时间都没有用过，而Docker从17.03开始分为docker-ce(社区版)和docker-ee(企业版)，所以先要删除本地的旧版本；")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# 移除掉旧的版本\nsudo yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-selinux \\\n                  docker-engine-selinux \\\n                  docker-engine\n\n# 删除所有旧的数据\nsudo rm -rf /var/lib/docker\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br")])]),a("h3",{attrs:{id:"_2-安装依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装依赖"}},[e._v("#")]),e._v(" 2.安装依赖")]),e._v(" "),a("p",[e._v("docker依赖devicemapper存储类型，逻辑卷管理lvm2；")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo yum install -y yum-utils \\\n  device-mapper-persistent-data \\\n  lvm2\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h3",{attrs:{id:"_3-添加yum软件源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-添加yum软件源"}},[e._v("#")]),e._v(" 3.添加yum软件源")]),e._v(" "),a("p",[e._v("添加Docker稳定版本的yum软件源；")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo yum-config-manager \\\n    --add-repo \\\n    https://download.docker.com/linux/centos/docker-ce.repo\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("使用了阿里云镜像")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo yum-config-manager \\\n    --add-repo \\\n    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h3",{attrs:{id:"_4-安装docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-安装docker"}},[e._v("#")]),e._v(" 4.安装docker")]),e._v(" "),a("p",[e._v("安装最新稳定版本的docker")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo yum install -y docker-ce\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("如果想安装指定版本的Docker，可以查看一下版本并安装")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("yum list docker-ce --showduplicates | sort -r\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("可以指定版本安装,版本号可以忽略:和el7，如 docker-ce-19.03.4")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo yum install docker-ce-<VERSION STRING>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"_5-查看版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-查看版本"}},[e._v("#")]),e._v(" 5.查看版本")]),e._v(" "),a("p",[e._v("使用命令docker version")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[root@localhost /]# docker version\nClient: Docker Engine - Community\n Version:           19.03.5\n API version:       1.40\n Go version:        go1.12.12\n Git commit:        633a0ea\n Built:             Wed Nov 13 07:25:41 2019\n OS/Arch:           linux/amd64\n Experimental:      false\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br")])]),a("h3",{attrs:{id:"_6-启动关闭docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-启动关闭docker"}},[e._v("#")]),e._v(" 6.启动关闭docker")]),e._v(" "),a("p",[e._v("启动docker")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo systemctl start docker\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("验证是否启动成功")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[root@localhost ~]# docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("如果没有启动成功会显示Cannot connect to the Docker daemon；")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo systemctl stop docker\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("关闭使用stop命令即可；")]),e._v(" "),a("h3",{attrs:{id:"_7-更新和卸载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-更新和卸载"}},[e._v("#")]),e._v(" 7.更新和卸载")]),e._v(" "),a("p",[e._v("更新docker")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo yum update docker-ce\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("卸载docker")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo yum remove docker-ce\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"_8-安装遇到的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-安装遇到的问题"}},[e._v("#")]),e._v(" 8.安装遇到的问题")]),e._v(" "),a("p",[e._v("selinux-policy包与预期下载不匹配")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("selinux-policy-3.13.1-252.el7_ FAILED                                          \nhttp://mirrors.aliyun.com/centos/7.7.1908/updates/x86_64/Packages/selinux-policy-3.13.1-252.el7_7.6.noarch.rpm: [Errno -1] Package does not match intended download. Suggestion: run yum --enablerepo=updates clean metadata\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("手动下载安装即可")]),e._v(" "),a("h2",{attrs:{id:"docker使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker使用"}},[e._v("#")]),e._v(" Docker使用")]),e._v(" "),a("h3",{attrs:{id:"_1-运行hello-world容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-运行hello-world容器"}},[e._v("#")]),e._v(" 1.运行hello world容器")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[root@localhost ~]# docker run busybox echo \"Hello world\"\nUnable to find image 'busybox:latest' locally\nlatest: Pulling from library/busybox\n322973677ef5: Pull complete \nDigest: sha256:1828edd60c5efd34b2bf5dd3282ec0cc04d47b2ff9caa0b6d4f07a21d1c08084\nStatus: Downloaded newer image for busybox:latest\nHello world\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("p",[e._v("busybox是一个单一可执行文件，包含多种标准UNIX命令行工具，如：echo、ls 、gzip等；由上面的日志可以看出首先在本地找busybox:latest镜像，找不到会从Docker镜像中心拉取镜像，存放本地等待下次使用；")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[root@localhost ~]# docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nbusybox             latest              b534869c81f0        8 days ago          1.22MB\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("可以通过docker images查看当前的镜像列表；")]),e._v(" "),a("h3",{attrs:{id:"_2-创建node-js镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建node-js镜像"}},[e._v("#")]),e._v(" 2.创建Node.js镜像")]),e._v(" "),a("p",[e._v("创建一个Node.js应用的docker镜像，至少需要两个文件：应用文件，Dockerfile文件；")]),e._v(" "),a("h4",{attrs:{id:"_2-1-应用文件app-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-应用文件app-js"}},[e._v("#")]),e._v(" 2.1 应用文件app.js")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('const http = require(\'http\');\nconst os = require(\'os\');\nconsole.log("kubia server is starting...");\nvar handler = function(request,response){\n    console.log("Received request from " + request.connection.remoteAddress);\n    response.writeHead(200);\n    response.end("You\'ve hit " + os.hostname()+"\\n");\n};\nvar www = http.createServer(handler);\nwww.listen(8080);\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br")])]),a("p",[e._v("启动了一个端口为8080的http服务器，每个请求服务器会返回主机名称；")]),e._v(" "),a("h4",{attrs:{id:"_2-2-dockerfile文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-dockerfile文件"}},[e._v("#")]),e._v(" 2.2 Dockerfile文件")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('FROM node:7\nADD app.js /app.js\nENTRYPOINT ["node","app.js"]\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("From行定义了镜像的起始内容，使用的是node镜像的tag7版本；第二行中把app.js文件从本地文件夹添加到镜像的根目录；最后一行定义了当镜像被运行时需要被执行的命令；")]),e._v(" "),a("h4",{attrs:{id:"_2-3构建镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3构建镜像"}},[e._v("#")]),e._v(" 2.3构建镜像")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('[root@localhost docker]# docker build -t kubia .\nSending build context to Docker daemon  3.072kB\nStep 1/3 : FROM node:7\n7: Pulling from library/node\nad74af05f5a2: Pull complete \n2b032b8bbe8b: Pull complete \na9a5b35f6ead: Pull complete \n3245b5a1c52c: Pull complete \nafa075743392: Pull complete \n9fb9f21641cd: Pull complete \n3f40ad2666bc: Pull complete \n49c0ed396b49: Pull complete \nDigest: sha256:af5c2c6ac8bc3fa372ac031ef60c45a285eeba7bce9ee9ed66dad3a01e29ab8d\nStatus: Downloaded newer image for node:7\n ---\x3e d9aed20b68a4\nStep 2/3 : ADD app.js /app.js\n ---\x3e 28e5c631a15f\nStep 3/3 : ENTRYPOINT ["node","app.js"]\n ---\x3e Running in 63035bc6504d\nRemoving intermediate container 63035bc6504d\n ---\x3e bfb268fa87e0\nSuccessfully built bfb268fa87e0\nSuccessfully tagged kubia:latest\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br"),a("span",{staticClass:"line-number"},[e._v("23")]),a("br")])]),a("p",[e._v("使用docker build构建镜像，Docker 需要基于当前目录（注意命令结尾的点）构建一个叫kubia的镜像，Docker会在目录中寻找Dockerfile，然后基于其中的指令构建镜像。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[root@localhost docker]# docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nkubia               latest              bfb268fa87e0        12 minutes ago      660MB\nnode                7                   d9aed20b68a4        2 years ago         660MB\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("构建完之后可以查看当前镜像，除了我们构建的kubia镜像，还有node镜像，因为docker镜像不是一个大的二进制块， 而是由多层组成的；")]),e._v(" "),a("h3",{attrs:{id:"_3-运行容器镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-运行容器镜像"}},[e._v("#")]),e._v(" 3.运行容器镜像")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[root@localhost docker]# docker run --name kubia-container -p 8080:8080 -d kubia\n2f7a60412ae6f067226343550ad01cbcb1de7808ed2a0cdeed0b62be5c90f556\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("Docker基于kubia镜像创建一个叫kubia-container的新容器，本机上的8080端口会被映射到容器内的8080端口，并且在后台运行；本机和其他内网机器都可以访问8080端口：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[root@localhost docker]# curl localhost:8080\nYou've hit 2f7a60412ae6\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("浏览器访问8080端口："),a("br"),e._v(" "),a("img",{attrs:{src:"https://oscimg.oschina.net/oscnet/up-156894233ad70ced392071904ea8b365318.png",alt:""}})]),e._v(" "),a("p",[e._v("容器启动成功后，列出运行中的容器：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('[root@localhost docker]# docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                    NAMES\n2f7a60412ae6        kubia               "node app.js"       11 minutes ago      Up 11 minutes       0.0.0.0:8080->8080/tcp   kubia-container\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h3",{attrs:{id:"_4-探索运行容器的内部"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-探索运行容器的内部"}},[e._v("#")]),e._v(" 4.探索运行容器的内部")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[root@localhost docker]# docker exec -it kubia-container bash\nroot@2f7a60412ae6:/# ps aux\nUSER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot          1  0.0  1.6 682524 16232 ?        Ssl  10:55   0:00 node app.js\nroot         11  0.2  0.1  20240  1912 pts/0    Ss   11:13   0:00 bash\nroot         16  0.0  0.1  17496  1136 pts/0    R+   11:13   0:00 ps aux\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("p",[e._v("在已有的kubia-container容器内部运行bash；-i确保标准输入流保持开放，需要在shell 中输入命令；-t分配一个伪终端(TTY)；使用命令ps aux查看进程，可以看到其中就有app.js进程；")]),e._v(" "),a("h3",{attrs:{id:"_5-停止和删除容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-停止和删除容器"}},[e._v("#")]),e._v(" 5.停止和删除容器")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('[root@localhost docker]# docker stop kubia-container\nkubia-container\n[root@localhost docker]# docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n[root@localhost docker]# docker ps -a\nCONTAINER ID        IMAGE               COMMAND                CREATED             STATUS                       PORTS               NAMES\n2f7a60412ae6        kubia               "node app.js"          29 minutes ago      Exited (137) 6 minutes ago                       kubia-container\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("p",[e._v("使用stop命令停止容器之后，ps命令就查不到正在运行的容器；ps -a列出所有容器(包括正在运行和不在运行的)；")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[root@localhost docker]# docker rm kubia-container\nkubia-container\n[root@localhost docker]# docker ps -a\nCONTAINER ID        IMAGE               COMMAND                CREATED             STATUS                   PORTS               NAMES\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("使用rm命令删除容器，这样ps -a也查不到容器了；")]),e._v(" "),a("h3",{attrs:{id:"_6-向镜像仓库推送镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-向镜像仓库推送镜像"}},[e._v("#")]),e._v(" 6.向镜像仓库推送镜像")]),e._v(" "),a("h4",{attrs:{id:"_6-1-使用附加标签标注镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-使用附加标签标注镜像"}},[e._v("#")]),e._v(" 6.1 使用附加标签标注镜像")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[root@localhost docker]# docker tag kubia ksfzhaohui/kubia\n[root@localhost docker]# docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nksfzhaohui/kubia    latest              bfb268fa87e0        2 hours ago         660MB\nkubia               latest              bfb268fa87e0        2 hours ago         660MB\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("给同一个镜像创建一个额外的标签，可以发现IMAGE ID都是同一个；这里的ksfzhaohui用自己的"),a("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker Hub ID"),a("OutboundLink")],1),e._v("代替；")]),e._v(" "),a("h4",{attrs:{id:"_6-2-向docker-hub推送镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-向docker-hub推送镜像"}},[e._v("#")]),e._v(" 6.2 向Docker Hub推送镜像")]),e._v(" "),a("p",[e._v("推送之前是需要登录"),a("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker hub"),a("OutboundLink")],1),e._v("的，使用login命令：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[root@localhost docker]# docker login\nLogin with your Docker ID to push and pull images from Docker Hub. If you don't have a Docker ID, head over to https://hub.docker.com to create one.\nUsername: ksfzhaohui\nPassword: \nWARNING! Your password will be stored unencrypted in /root/.docker/config.json.\nConfigure a credential helper to remove this warning. See\nhttps://docs.docker.com/engine/reference/commandline/login/#credentials-store\n\nLogin Succeeded\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br")])]),a("p",[e._v("登录成功之后就可以，推送镜像到hub了，使用push命令：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[root@localhost docker]# docker push ksfzhaohui/kubia\nThe push refers to repository [docker.io/ksfzhaohui/kubia]\nd6851d29939a: Pushed \nab90d83fa34a: Mounted from library/node \n8ee318e54723: Mounted from library/node \ne6695624484e: Mounted from library/node \nda59b99bbd3b: Mounted from library/node \n5616a6292c16: Mounted from library/node \nf3ed6cb59ab0: Mounted from library/node \n654f45ecb7e3: Mounted from library/node \n2c40c66f7667: Mounted from library/node \nlatest: digest: sha256:6ef8bb39b65fbc08137f8bd58531195289f8dcfc1c1a6bb482c993c5667cc8f3 size: 2213\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br")])]),a("p",[e._v("登录"),a("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker hub"),a("OutboundLink")],1),e._v("查看是否已经上传成功"),a("br"),e._v(" "),a("img",{attrs:{src:"https://oscimg.oschina.net/oscnet/up-a1f3af1f493d8be5b2aa7352698f2c296da.png",alt:""}})]),e._v(" "),a("h2",{attrs:{id:"配置kubernetes集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置kubernetes集群"}},[e._v("#")]),e._v(" 配置Kubernetes集群")]),e._v(" "),a("p",[e._v("安装Kubemetes集群的方法有许多，Kubemetes可以在本地的开发机器、自己组织的机器集群或是虚拟机提供商(Google Compute Engine、Amazon EC2、Microsoft Azure 等）上运行，或者使用托管的Kubemetes集群，如Google Kubemetes Engine；最简单的方式是用Minikube 运行一个本地单节点Kubernetes集群；")]),e._v(" "),a("h3",{attrs:{id:"_1-安装minikube"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装minikube"}},[e._v("#")]),e._v(" 1.安装minikube")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/kubernetes/minikube",target:"_blank",rel:"noopener noreferrer"}},[e._v("Minikube"),a("OutboundLink")],1),e._v("是一个需要下载并放到路径中的二进制文件；它适用于osx 、Linux和Windows系统；更多详细"),a("a",{attrs:{href:"https://minikube.sigs.k8s.io/docs/start/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Getting Started"),a("OutboundLink")],1),e._v("，这里在windows系统下安装，下载"),a("a",{attrs:{href:"https://storage.googleapis.com/minikube/releases/latest/minikube-installer.exe",target:"_blank",rel:"noopener noreferrer"}},[e._v("minikube installer"),a("OutboundLink")],1),e._v("即可，双击安装到"),a("strong",[e._v("D:\\Program Files\\Kubernetes\\Minikube")]),e._v("目录下;")]),e._v(" "),a("h3",{attrs:{id:"_2-启动kubernetes集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-启动kubernetes集群"}},[e._v("#")]),e._v(" 2.启动Kubernetes集群")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("D:\\Program Files\\Kubernetes\\Minikube>minikube start --vm-driver=virtualbox --iso\n-url=https://kubernetes.oss-cn-hangzhou.aliyuncs.com/minikube/iso/minikube-v1.6.\n0.iso --image-repository registry.aliyuncs.com/google_containers --image-mirror-\ncountry cn\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("**--iso-url：**利用阿里云的镜像地址下载相应的.iso文件；"),a("br"),e._v(" "),a("strong",[e._v("--image-repository：")]),a("a",{attrs:{href:"http://xn--k8s-2w0el71h170cgd2a.gcr.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("默认值是k8s.gcr.io"),a("OutboundLink")],1),e._v("，指向阿里云的镜像地址："),a("code",[e._v("registry.aliyuncs.com/google_containers")]),a("br"),e._v("\n**--image-mirror-country：**指定容器镜像仓库；")]),e._v(" "),a("h3",{attrs:{id:"_3-安装kubectl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装kubectl"}},[e._v("#")]),e._v(" 3.安装kubectl")]),e._v(" "),a("p",[e._v("下载windows版本"),a("a",{attrs:{href:"https://storage.googleapis.com/kubernetes-release/release/v1.17.0/bin/windows/amd64/kubectl.exe",target:"_blank",rel:"noopener noreferrer"}},[e._v("kubectl"),a("OutboundLink")],1),e._v("，无需安装直接在cmd中使用命令即可，如查看集群是否正常工作：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("D:\\k8s>kubectl cluster-info\nKubernetes master is running at https://192.168.99.107:8443\nKubeDNS is running at https://192.168.99.107:8443/api/v1/namespaces/kube-system/\nservices/kube-dns:dns/proxy\n\nTo further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("h3",{attrs:{id:"_4-kubernetes控制台"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-kubernetes控制台"}},[e._v("#")]),e._v(" 4.Kubernetes控制台")]),e._v(" "),a("p",[e._v("使用命令minikube dashboard：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("D:\\Program Files\\Kubernetes\\Minikube>minikube dashboard\n* Verifying dashboard health ...\n* Launching proxy ...\n* Verifying proxy health ...\n* Opening http://127.0.0.1:59371/api/v1/namespaces/kubernetes-dashboard/services\n/http:kubernetes-dashboard:/proxy/ in your default browser...\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("p",[e._v("会自动跳转到浏览器中，控制台如下所示："),a("br"),e._v(" "),a("img",{attrs:{src:"https://oscimg.oschina.net/oscnet/up-eb050ae5399f9a16dd38da1e229ed0fff83.JPEG",alt:""}})]),e._v(" "),a("h2",{attrs:{id:"在kubernetes上运行第一个应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在kubernetes上运行第一个应用"}},[e._v("#")]),e._v(" 在Kubernetes上运行第一个应用")]),e._v(" "),a("h3",{attrs:{id:"_1-部署kubia镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-部署kubia镜像"}},[e._v("#")]),e._v(" 1.部署kubia镜像")]),e._v(" "),a("p",[e._v("在Kubernetes上部署上面推送到Docker Hub的kubia镜像")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("D:\\k8s>kubectl run kubia --image=ksfzhaohui/kubia --port=8080 --generator=run/v1\nkubectl run --generator=run/v1 is DEPRECATED and will be removed in a future ver\nsion. Use kubectl run --generator=run-pod/v1 or kubectl create instead.\nreplicationcontroller/kubia created\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("可以通过命令或者在控制台查看当前部署的情况：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("C:\\Users\\hui.zhao.cfs>kubectl get pods\nNAME          READY   STATUS             RESTARTS   AGE\nkubia-797mx   0/1     ImagePullBackOff   0          16m\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("一个pod是一组紧密相关的容器，它们总是一起运行在同一个工作节点上，以及同一个Linux 命名空间中。每个pod就像一个独立的逻辑机器，拥有自己的IP 、主机名、进程等，运行一个独立的应用程序；"),a("br"),e._v("\n以上的ready为0/1表示为挂起状态，因为需要下载镜像，启动容器等一系列操作；")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("C:\\Users\\hui.zhao.cfs>kubectl get pods\nNAME           READY   STATUS              RESTARTS   AGE\nkubia-dms8n    1/1     Running             0          18m\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("ready为1/1表示已经部署就绪了；")]),e._v(" "),a("h3",{attrs:{id:"_2-访问kubia应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-访问kubia应用"}},[e._v("#")]),e._v(" 2.访问kubia应用")]),e._v(" "),a("p",[e._v("每个pod都有自己的IP 地址，但是这个地址是集群内部的，不能从集群外部访问。要让pod能够从外部访问，需要通过服务对象公开它，要创建一个特殊的LoadBalancer类型的服务；")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("C:\\Users\\hui.zhao.cfs>kubectl expose rc kubia --type=NodePort\nservice/kubia exposed\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("列出所有服务")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("C:\\Users\\hui.zhao.cfs>kubectl get services\nNAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE\nkubernetes   ClusterIP   10.96.0.1       <none>        443/TCP          3h13m\nkubia        NodePort    10.96.174.172   <none>        8080:30265/TCP   2m12s\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("查看kubia service的url")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("D:\\Program Files\\Kubernetes\\Minikube>minikube service kubia --url\nhttp://192.168.99.108:30265\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("可以拿着提供的对外ip在浏览器中进行访问"),a("br"),e._v(" "),a("img",{attrs:{src:"https://oscimg.oschina.net/oscnet/up-d73c380f2cd4aec7370e3bf20a3a368e6a7.png",alt:""}})]),e._v(" "),a("h3",{attrs:{id:"_3-水平伸缩应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-水平伸缩应用"}},[e._v("#")]),e._v(" 3.水平伸缩应用")]),e._v(" "),a("p",[e._v("使用Kubemetes的一个主要好处是可以简单地扩展部署，把运行实例的数量增加到三个；")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("C:\\Users\\hui.zhao.cfs>kubectl get replicationcontrollers\nNAME    DESIRED   CURRENT   READY   AGE\nkubia   1         1         1       172m\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("当前的副本数为1，然后设置副本数为3")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("C:\\Users\\hui.zhao.cfs>kubectl scale rc kubia --replicas=3\nreplicationcontroller/kubia scaled\n\nC:\\Users\\hui.zhao.cfs>kubectl get replicationcontrollers\nNAME    DESIRED   CURRENT   READY   AGE\nkubia   3         3         1       174m\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("p",[e._v("从控制台看也可以看到有三个副本："),a("br"),e._v(" "),a("img",{attrs:{src:"https://oscimg.oschina.net/oscnet/up-21d361fc8cbdcc633fe42a403406954cd30.JPEG",alt:""}})]),e._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[e._v("#")]),e._v(" 总结")]),e._v(" "),a("p",[e._v("本文从Docker安装和使用开始，到配置Kubernetes集群，最后介绍了如何在Kubernetes上运行第一个应用；通过实战操作的方式对Kubernetes有个简单的认识。")]),e._v(" "),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),a("p",[e._v("Kubernetes in Action")])])}),[],!1,null,null,null);s.default=t.exports}}]);